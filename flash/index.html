<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
        }
        #ruffle {
            width: 100%;
            height: 100%;
            display: block;
        }
    </style>
    <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
</head>
<body>
    <div id="ruffle"></div>
    <script>
      var defaultGame = decodeURIComponent(window.location.hash.slice(1) || '');
      if (!defaultGame) {
        /*var fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.id = 'fileInput';
        var uploadButton = document.createElement('button');
        uploadButton.textContent = 'Upload File';
        uploadButton.addEventListener('click', handleFileUpload);
        // Append elements to the body
        document.body.appendChild(fileInput);
        document.body.appendChild(uploadButton);

        function handleFileUpload() {
          var uploadedFile = fileInput.files[0];
          if (uploadedFile) {
            // appears to take a url rather than local file
            load(uploadedFile);
          } else {
            alert('Please select a file to upload.');
          }
        }
        */
      } else {
        document.title = (defaultGame.replace(/-/g, ' ')).toLowerCase().split(' ').map(function(word) {
          return word[0].toLowerCase() + word.substr(1);
        }).join(' ');
        load(`files/${defaultGame}.swf`);
      }

      function load(game) {
        window.RufflePlayer = window.RufflePlayer || {};
        window.addEventListener("load", (event) => {
          const ruffle = window.RufflePlayer.newest();
          const player = ruffle.createPlayer();
          const container = document.getElementById("ruffle");
          player.id = "player";
          player.style.width = "100%";
          player.style.height = "100%";
          player.style.margin = "0";
          container.appendChild(player)
          player.load(game);
        });
      }
    </script>
</body>